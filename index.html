<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Valentine Quest ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;500&display=swap" rel="stylesheet">
    <style>
        :root { --primary-pink: #ff4d6d; --bg-soft: #fff0f3; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            font-family: 'Kanit', sans-serif; background-color: var(--bg-soft); 
            margin: 0; padding: 20px; display: flex; flex-direction: column;
            justify-content: center; align-items: center; min-height: 100vh; overflow-x: hidden;
        }

        .card {
            background: white; width: 100%; max-width: 380px;
            padding: 30px; border-radius: 30px;
            box-shadow: 0 15px 35px rgba(255, 77, 109, 0.2);
            text-align: center; position: relative; z-index: 10;
        }

        h2 { color: var(--primary-pink); font-size: 1.3rem; margin-bottom: 25px; min-height: 3em; display: flex; align-items: center; justify-content: center; }

        /* Quiz Styles */
        .choice-container { display: grid; gap: 15px; }
        .choice-btn {
            width: 100%; padding: 15px; background: white;
            color: var(--primary-pink); border: 2px solid #ffccd5;
            border-radius: 15px; font-size: 1.1rem; font-weight: 500;
            cursor: pointer; transition: 0.2s;
        }
        .choice-btn:active { background: var(--primary-pink); color: white; transform: scale(0.98); }

        /* Wheel Styles */
        #success-page { display: none; }
        .wheel-box {
            position: relative; width: 300px; height: 300px;
            margin: 0 auto 30px auto; border: 5px solid white;
            border-radius: 50%; box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        .wheel {
            width: 100%; height: 100%; border-radius: 50%;
            position: relative; overflow: hidden;
            transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1);
        }
        .pointer {
            position: absolute; top: -20px; left: 50%;
            transform: translateX(-50%); width: 0; height: 0;
            border-left: 15px solid transparent; border-right: 15px solid transparent;
            border-top: 30px solid var(--primary-pink); z-index: 100;
        }
        .sector {
            position: absolute; width: 50%; height: 50%;
            transform-origin: 100% 100%; left: 0; top: 0;
            display: flex; align-items: center; justify-content: center;
            color: #333; font-weight: bold; font-size: 12px;
            padding-right: 20px;
        }
        .sector span {
            transform: rotate(45deg); display: block; text-align: center;
            width: 80px; line-height: 1.2;
        }

        /* Modal */
        #modal-overlay {
            display: none; position: fixed; top: 0; left: 0;
            width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85);
            z-index: 1000; justify-content: center; align-items: center;
        }
        .modal-content {
            background: white; width: 85%; max-width: 320px;
            padding: 30px; border-radius: 25px; text-align: center;
            animation: popUp 0.4s ease-out;
        }
        @keyframes popUp { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        #result-page { display: none; }
    </style>
</head>
<body>

    <div class="card">
        <div id="quiz-page">
            <p id="step-counter" style="color: #ff8fa3; font-weight: bold;">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà 1/5 ‚ù§Ô∏è</p>
            <h2 id="question">‡πÉ‡∏Ñ‡∏£‡∏Å‡∏¥‡∏ô‡πÄ‡∏Å‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?</h2>
            <div class="choice-container">
                <button class="choice-btn" onclick="handleChoice('‡∏Å')">‡∏Å. <span id="choice-a">‡πÄ‡∏ò‡∏≠</span></button>
                <button class="choice-btn" onclick="handleChoice('‡∏Ç')">‡∏Ç. <span id="choice-b">‡πÑ‡∏ï‡πÄ‡∏ï‡∏¥‡πâ‡∏•</span></button>
            </div>
        </div>

        <div id="result-page">
            <div style="font-size: 60px;">üò¢</div>
            <h2 id="result-text">‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î‡∏î‡∏î</h2>
            <button class="choice-btn" style="background: var(--primary-pink); color: white;" onclick="resetQuiz()">‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏à‡πâ‡∏≤</button>
        </div>

        <div id="success-page">
            <h2 style="min-height: auto; margin-bottom: 20px;">‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î ‡∏™‡∏∏‡πà‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• 1 ‡∏≠‡∏¢‡πà‡∏≤‡∏á üéÅ</h2>
            <div class="wheel-box">
                <div class="pointer"></div>
                <div id="wheel" class="wheel"></div>
            </div>
            <button id="spin-btn" onclick="spinNow()" style="width: 100%; padding: 18px; background: var(--primary-pink); color:white; border:none; border-radius:20px; font-weight: bold; font-size: 1.2rem; cursor: pointer;">‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°‡∏î‡∏ß‡∏á‡πÄ‡∏•‡∏¢! üé°</button>
        </div>
    </div>

    <div id="modal-overlay">
        <div class="modal-content">
            <h2 style="min-height: auto;">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! üéâ</h2>
            <p>‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏µ‡πà‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏î‡πâ‡∏Ñ‡∏∑‡∏≠...</p>
            <h1 id="final-prize" style="color: var(--primary-pink); margin: 20px 0; font-size: 2rem;"></h1>
            <button class="choice-btn" style="background: var(--primary-pink); color: white; border: none;" onclick="closeModal()">‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö ‚ù§Ô∏è</button>
        </div>
    </div>

    <script>
        const quizData = [
            { q: "‡πÉ‡∏Ñ‡∏£‡∏Å‡∏¥‡∏ô‡πÄ‡∏Å‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?", a: "‡∏Å", choices: {‡∏Å: "‡πÄ‡∏ò‡∏≠", ‡∏Ç: "‡πÑ‡∏ï‡πÄ‡∏ï‡∏¥‡πâ‡∏•"} },
            { q: "‡πÉ‡∏Ñ‡∏£‡∏Ç‡∏µ‡πâ‡∏á‡∏≠‡πÅ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?", a: "‡∏Ç", choices: {‡∏Å: "‡πÑ‡∏ï‡πÄ‡∏ï‡∏¥‡πâ‡∏•", ‡∏Ç: "‡πÄ‡∏ò‡∏≠"} },
            { q: "‡πÉ‡∏Ñ‡∏£‡∏Ç‡∏µ‡πâ‡∏Å‡∏•‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?", a: "‡∏Å", choices: {‡∏Å: "‡πÄ‡∏ò‡∏≠", ‡∏Ç: "‡πÑ‡∏ï‡πÄ‡∏ï‡∏¥‡πâ‡∏•"} },
            { q: "‡πÉ‡∏Ñ‡∏£‡∏Ç‡∏µ‡πâ‡∏á‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?", a: "‡∏Ç", choices: {‡∏Å: "‡πÑ‡∏ï‡πÄ‡∏ï‡∏¥‡πâ‡∏•", ‡∏Ç: "‡πÄ‡∏ò‡∏≠"} },
            { q: "‡πÉ‡∏Ñ‡∏£‡∏î‡∏∑‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?", a: "‡∏Å", choices: {‡∏Å: "‡πÄ‡∏ò‡∏≠", ‡∏Ç: "‡πÑ‡∏ï‡πÄ‡∏ï‡∏¥‡πâ‡∏•"} }
        ];

        const prizes = [
            "‡∏Å‡∏≠‡∏î 1 ‡∏ó‡∏µ", "‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ç‡∏ô‡∏°", "‡πÄ‡∏ï‡∏∞‡∏ï‡∏π‡∏î 1 ‡∏ó‡∏µ", 
            "‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡πâ 1 ‡∏≠‡∏¢‡πà‡∏≤‡∏á", "‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏ï‡∏µ‡πã‡∏ô‡πâ‡∏≠‡∏¢", "‡∏à‡∏∏‡πä‡∏ö 1 ‡∏ó‡∏µ", "‡∏ã‡∏∑‡πâ‡∏≠‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡πÉ‡∏´‡πâ"
        ];
        const colors = ["#ffadad", "#ffd6a5", "#fdffb6", "#caffbf", "#9bf6ff", "#a0c4ff", "#bdb2ff"];

        let currentStep = 0, score = 0;
        let isSpinning = false;

        // --- Quiz Logic ---
        function handleChoice(picked) {
            if (picked === quizData[currentStep].a) score++;
            currentStep++;
            if (currentStep < quizData.length) updateQuestion();
            else showFinalResult();
        }

        function updateQuestion() {
            document.getElementById('step-counter').innerText = `‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà ${currentStep + 1}/5 ‚ù§Ô∏è`;
            document.getElementById('question').innerText = quizData[currentStep].q;
            document.getElementById('choice-a').innerText = quizData[currentStep].choices.‡∏Å;
            document.getElementById('choice-b').innerText = quizData[currentStep].choices.‡∏Ç;
        }

        function showFinalResult() {
            document.getElementById('quiz-page').style.display = 'none';
            if (score === 5) {
                document.getElementById('success-page').style.display = 'block';
                createWheel();
            } else {
                document.getElementById('result-page').style.display = 'block';
                document.getElementById('result-text').innerText = `‡∏ñ‡∏π‡∏Å‡πÅ‡∏Ñ‡πà ${score} ‡∏Ç‡πâ‡∏≠‡πÄ‡∏≠‡∏á... ‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏π‡∏Å‡∏´‡∏°‡∏î‡πÄ‡∏î‡πâ‡∏≠`;
            }
        }

        function resetQuiz() {
            currentStep = 0; score = 0;
            document.getElementById('quiz-page').style.display = 'block';
            document.getElementById('result-page').style.display = 'none';
            updateQuestion();
        }

        // --- Wheel Logic ---
        function createWheel() {
            const wheel = document.getElementById('wheel');
            const numPrizes = prizes.length;
            const angleSize = 360 / numPrizes;

            prizes.forEach((text, i) => {
                const sector = document.createElement('div');
                sector.className = 'sector';
                sector.style.backgroundColor = colors[i];
                // ‡∏´‡∏°‡∏∏‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á
                sector.style.transform = `rotate(${i * angleSize}deg) skewY(${90 - angleSize}deg)`;
                
                const span = document.createElement('span');
                span.innerText = text;
                // ‡∏õ‡∏£‡∏±‡∏ö‡∏°‡∏∏‡∏°‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏ï‡∏£‡∏á (‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏ä‡πà‡∏≠‡∏á)
                span.style.transform = `skewY(-${90 - angleSize}deg) rotate(${angleSize / 2}deg)`;
                
                sector.appendChild(span);
                wheel.appendChild(sector);
            });
        }

        function spinNow() {
            if (isSpinning) return;
            isSpinning = true;
            
            const wheel = document.getElementById('wheel');
            const numPrizes = prizes.length;
            const angleSize = 360 / numPrizes;
            
            // ‡∏™‡∏∏‡πà‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤
            const winningIndex = Math.floor(Math.random() * numPrizes);
            const prizeName = prizes[winningIndex];

            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏á‡∏®‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏´‡∏¢‡∏∏‡∏î (‡πÄ‡∏Ç‡πá‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á 0 ‡∏≠‡∏á‡∏®‡∏≤)
            // ‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏á‡∏•‡πâ‡∏≠‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏î‡πâ‡πÑ‡∏õ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á -90 ‡∏≠‡∏á‡∏®‡∏≤ (‡∏´‡∏£‡∏∑‡∏≠ 270)
            const extraSpins = 5 * 360; // ‡∏´‡∏°‡∏∏‡∏ô 5 ‡∏£‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏¢‡∏∏‡∏î
            const stopAngle = extraSpins + (360 - (winningIndex * angleSize)) - (angleSize / 2);

            wheel.style.transform = `rotate(${stopAngle}deg)`;

            setTimeout(() => {
                document.getElementById('final-prize').innerText = prizeName;
                document.getElementById('modal-overlay').style.display = 'flex';
                isSpinning = false;
            }, 4000); // ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö transition ‡πÉ‡∏ô CSS
        }

        function closeModal() {
            document.getElementById('modal-overlay').style.display = 'none';
        }
    </script>
</body>
</html>